Description: CVE-2018-8740: Null pointer dereference  on corrupted file
 Upstream patch backported to sqlite (V2).
Origin: https://www.sqlite.org/cgi/src/vdiff?from=1774f1c3baf0bc3d&to=d75e67654aa9620b
Forwarded: not needed, sqlite v2 is EOL.
Last-Update: 2023-05-13 <YYYY-MM-DD, last update of the meta-information, optional>
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
--- a/src/build.c
+++ b/src/build.c
@@ -909,6 +909,9 @@
   ** should have been put there by the sqliteOpenCb routine.)
   */
   if( db->init.busy ){
+    if( pSelect ){
+      return;
+    }
     p->tnum = db->init.newTnum;
   }
 
